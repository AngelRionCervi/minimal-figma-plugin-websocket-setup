<div>open console to see WebSocket message</div>
<script>
  const socket = new WebSocket("ws://localhost:8080");

  socket.addEventListener("open", (event) => {
    socket.send("[ui -> WS server] Hello Server!");
    parent.postMessage({ pluginMessage: "WebSocket connected" }, "*");
  });

  socket.addEventListener("message", (event) => {
    console.log("[WS server -> ui] Message from server: ", event.data);
    parent.postMessage(
      { pluginMessage: `WebSocket message: ${event.data}` },
      "*"
    );
  });

  window.onmessage = (event) => {
    const msg = event.data.pluginMessage;
    console.log('[code -> ui] Message from plugin code: ', msg);
  };

  socket.addEventListener("error", (event) => {
    console.log("ERROR: ", event);
  });
</script>
